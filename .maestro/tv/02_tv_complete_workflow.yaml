appId: "com.multiregionvpn"
---
# Google TV Complete Workflow (Remote Control Only)
# Tests full user journey on TV using D-pad navigation

- launchApp
- assertVisible: "Region Router"
- waitForAnimationToEnd

# ============================================
# Navigate to Settings to enter credentials
# ============================================
- pressKey: Down  # Focus content
- waitForAnimationToEnd

# Navigate to Settings tab (3 presses right: Tunnels → Apps → Connections → Settings)
- pressKey: Right
- waitForAnimationToEnd
- pressKey: Right  
- waitForAnimationToEnd
- pressKey: Right
- waitForAnimationToEnd
- pressKey: Enter  # Select Settings tab
- waitForAnimationToEnd

- assertVisible: "NordVPN"

# Focus on username field
- pressKey: Down
- waitForAnimationToEnd
- pressKey: Enter  # Open keyboard
- waitForAnimationToEnd

# Note: On TV, text input requires on-screen keyboard
# Maestro can input text directly
- inputText: "${NORDVPN_USERNAME}"
- pressKey: Enter  # Confirm
- waitForAnimationToEnd

# Focus on password field
- pressKey: Down
- waitForAnimationToEnd
- pressKey: Enter
- waitForAnimationToEnd
- inputText: "${NORDVPN_PASSWORD}"
- pressKey: Enter
- waitForAnimationToEnd

# Focus on Save button
- pressKey: Down
- waitForAnimationToEnd
- pressKey: Enter  # Save credentials
- waitForAnimationToEnd

- assertVisible: "Credentials saved"

# ============================================
# Navigate to Tunnels tab to add tunnel
# ============================================
- pressKey: Left  # Back to Tunnels (going left from Settings)
- waitForAnimationToEnd
- pressKey: Left
- waitForAnimationToEnd
- pressKey: Left
- waitForAnimationToEnd
- pressKey: Enter
- waitForAnimationToEnd

- assertVisible: "Add Tunnel"

# Focus on Add Tunnel button
- pressKey: Down
- waitForAnimationToEnd
- pressKey: Enter  # Open Add Tunnel dialog
- waitForAnimationToEnd

- assertVisible: "Add VPN Tunnel"

# Note: Dialog navigation on TV might need specific handling
# For now, we'll verify dialog opened
# Manual testing required for full dialog flow

# Press Back to close dialog
- pressKey: Back
- waitForAnimationToEnd

# ============================================
# Test VPN Toggle with D-pad
# ============================================
- pressKey: Up  # Focus header
- waitForAnimationToEnd
- pressKey: Right  # Navigate to toggle
- waitForAnimationToEnd
- pressKey: Enter  # Toggle VPN
- waitForAnimationToEnd

# Handle permission dialog
- pressKey: Enter  # OK/Allow
  optional: true
- waitForAnimationToEnd

# Status should update
- assertVisible:
    text: "Connecting...|Protected|Error"

# Toggle off
- pressKey: Up
- waitForAnimationToEnd
- pressKey: Right
- waitForAnimationToEnd
- pressKey: Enter
- waitForAnimationToEnd

- assertVisible: "Disconnected"

